Документация проекта: 
Кудинов Роман 11В Naming ^ WebTube ^ Сайт с распознаванием лиц, плеером видео, возможностью публиковать свои видео и скачивать их.
1.	Постановка задачи:
Цель:
Создать удобный веб-сервис, где пользователи могут быстро регистрироваться и входить на сайт, в том числе одной вебкамерой, а также легко публиковать и просматривать видео с личными комментариями и категориями.
Основные задачи:
•	Организовать надёжную регистрацию и традиционный вход по email-паролю.
•	Реализовать вход по лицу через веб-камеру, чтобы авторизация стала мгновенной. (обучить для этого собственную модель)
•	Предоставить в профиле возможность загружать аватар и сразу создавать эталонный снимок лица.
•	Позволить пользователям публиковать ролики с YouTube: вставлять ссылку, писать комментарий и выбирать одну или несколько тем из списка.
•	Отобразить личные видео в профиле в порядке от нового к старому, а на главной — все ролики всех участников.
•	Встроить плеер для просмотра прямо на сайте и кнопку для скачивания.
•	Организовать отдельную страницу просмотра видео с полным текстом комментария, списком категорий и подборкой похожих роликов.
Основные требования:
•	Совместимость с современными браузерами (доступ к камере по HTTPS).
•	Проверка данных пользователя(программа не позволяет вместо почты, обойтись рандомным текстом), а также хеширование пароля.
•	Использование хранения данных в базе (SQLite + ORM).
•	Высокая читаемость и расширяемость кода (Flask, SQLAlchemy).
•	Корректная работа ML-модуля по распознаванию лиц (ResNet-18 эмбеддинги, порог сходства).
•	Удобный интерфейс: мгновенная съёмка лица, поиск и мульти-выбор категорий, помимо перехода на видеохостинг с видео, возможность просматривать видео сразу на сайте.


2.	Используемые алгоритмы и/или технологии
Python 3.8+ и веб-фреймворк Flask для серверной части.
- SQLite и ORM SQLAlchemy для хранения пользовательских данных, видео, категорий.
- PyTorch и torchvision (ResNet18) для извлечения эмбеддингов лиц.
- Библиотека yt_dlp для получения информации о видео и реализации функции скачивания.
- JavaScript (Fetch API, getUserMedia) для съёмки фото с веб-камеры и асинхронной отправки данных.
- HTML/CSS и шаблонизатор Jinja2 для реализации интерфейса.
- Pillow (PIL) и NumPy для обработки изображений.
- Встраиваемый YouTube iframe-плеер для просмотра видео.
Хвалюсь:
Обучил сетку, которая способна различать лица на данных с базы данных.
Использовал разные API чтобы скачивать или смотреть в встроенном плеере видео из ютуба – других видеохостингов.
Использовал JavaScript Для использования вебкамеры в режиме реального времени.
Научился использовать эмбеддинги для распознавания лиц из баз данных либо определения что не было еще такого лица. (это было убийственно)
Использовал базы данных для хранения данных, с удобным сохранением всего.


3.	Руководство пользователя
1. Откройте главную страницу приложения.
2. Зарегистрируйтесь: введите имя, email и пароль.
3. Выполните вход по email и паролю или через фото лица:
   - Разрешите доступ к веб-камере.
   - Нажмите «Снять фото лица» для аутентификации.
4. В профиле вы можете:
   - Изменить аватар: загрузить изображение.
   - Создать снимок лица: нажать кнопку, сделать фото через веб-камеру.
5. Добавление видео:
   - Введите URL YouTube(или любой другой видеохостинг) и комментарий.
   - Найдите и выберите категории через поле поиска.
   - Нажмите «Добавить видео».
6. Просмотр видео:
   - Личные видео отображаются в списке профиля.
   - На главной странице отображаются все видео всех пользователей.
   - Для просмотра нажмите на название видео: откроется встраиваемый плеер.
   - Под видео доступны полный комментарий, категории и кнопка «Скачать видео».



4.	Руководство программиста
Архитектура проекта разделена на следующие части:

- **app.py**: основной скрипт Flask-приложения с маршрутами:
  - `/register`, `/login`, `/logout` — регистрация и аутентификация;
  - `/profile` — профиль пользователя (загрузка аватара, фото лица, добавление видео);
  - `/download_video/<id>` — скачивание видео через yt_dlp;
  - `/view_video/<id>` — просмотр видео в iframe, полный комментарий, похожие видео.

- **models.py** (или раздел в `app.py`) — определены SQLAlchemy-модели:
  - `User`: хранит `id`, `email`, захешированный `password`, имя, аватар, имя файла фотографии лица.
  - `Category`: список категорий (уникальное название).
  - `Video`: `url`, `title`, `comment`, метка времени, связь с автором (`user_id`) и категориями через таблицу-связку `video_categories`.
  > **База данных**: все данные пользователей, аватарки, снимки лиц, информация о видео, комментарии и выбранные категории сохраняются в SQLite через SQLAlchemy.

- **categories.py**: файл со списком доступных категорий `CATEGORIES`. При первом заходе в профиль выполняется заполнение (seed) таблицы `Category` этими значениями.

- **Шаблоны Jinja2** (`templates/`):
  - `index.html`, `login.html`, `register.html`, `profile.html`, `video_view.html`.

- **Логика распознавания лиц**:
  1. **Feature-extractor**: используем ResNet18 без классификационного слоя, получаем 512-мерный вектор признаков.
  2. **Вычисление эмбеддингов**: нормируем вектор признаков (делим на его длину) — получаем эмбеддинг лица.
  3. **Сравнение с базой**:
     - Каждый пользователь, загрузивший фото лица, имеет эталонный эмбеддинг, сохранённый в базе или вычисляемый «на лету».
     - При попытке входа делаем снимок, вычисляем его эмбеддинг, затем для каждого эталонного вычисляем косинусное сходство.
     - Если максимальное сходство превышает порог (например, 0.7), считаем, что лицо совпало, и выполняем автоматический вход.
  > Такой алгоритм позволяет понимать: мы представляем каждое лицо как набор чисел и измеряем «близость» этих векторов.

- **JavaScript**:
  - Захват камерного потока через `navigator.mediaDevices.getUserMedia`.
  - Захват кадра в `canvas` и отправка изображения через Fetch API.

- **Управление зависимостями** через `requirements.txt`:
  включает Flask, Flask-SQLAlchemy, SQLAlchemy, torch, torchvision, numpy, Pillow, yt-dlp.

5.	Используемые источники
•	Официальная документация Flask: https://flask.palletsprojects.com/
•	Руководство по SQLAlchemy: https://docs.sqlalchemy.org/
•	PyTorch & torchvision: https://pytorch.org/
•	Документация по yt_dlp: https://github.com/yt-dlp/yt-dlp
•	MDN Web Docs по getUserMedia: https://developer.mozilla.org/
•	Pillow (PIL) документация: https://pillow.readthedocs.io/

